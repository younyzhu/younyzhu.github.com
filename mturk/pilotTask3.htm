<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="css/index.css" type="text/css" charset="utf-8"/>
    <script type="text/javascript" src="./jqueryLib/jquery-1.10.2.js"></script>
    <script language="Javascript">
        $(document).ready(function () {
            $.extend({
                getUrlVars: function(){
                    // From http://code.google.com/p/js-uri/source/browse/trunk/lib/URI.js
                    var parser = /^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/;
                    var result = window.location.href.match(parser);
                    var scheme    = result[1] || null;
                    var authority = result[2] || null;
                    var path      = result[3] || null;
                    var query     = result[4] || null;
                    var fragment  = result[5] || null;

                    if (query === null || query === undefined) {
                        return {};
                    }
                    var vars = [], hash;
                    var hashes = query.split('&');
                    for(var i = 0; i < hashes.length; i++)
                    {
                        hash = hashes[i].split('=');
                        vars.push(hash[0]);
                        vars[hash[0]] = hash[1];
                    }
                    return vars;
                },
                getUrlVar: function(name){
                    return $.getUrlVars()[name];
                }
            });

            var assignmentId = $.getUrlVar('assignmentId');
            var workerId = $.getUrlVar('workerId');
            var hitId = $.getUrlVar('hitId');
            if (assignmentId == "ASSIGNMENT_ID_NOT_AVAILABLE") {
                // If we're previewing, disable the button and give it a helpful message
                document.getElementById('submitButton').disabled = true;
                $("#content").hide();
                document.getElementById('submitButton').value = "You must ACCEPT the HIT before you can submit the results.";
            } else {
                var url= "http://www.csee.umbc.edu/~yongnan/PathwayPilot/pilotTask3.html";
                url +="?workerId=";
                url+=workerId;
                $("#href").attr('href',url);
                $("#content").show();
                $("#assignmentId").val(assignmentId);
                var form = document.getElementById('mturk_form');
                if (document.referrer && ( document.referrer.indexOf('workersandbox') != -1)) {
                    form.action = "https://workersandbox.mturk.com/mturk/externalSubmit";
                }
            }
        });


        function basicPopup(url) {
            var popupWindow = window.open(url, 'popUpWindow', 'height=' + screen.height + ',width=' + screen.width + ',\
		left=0,top=0,resizable=yes,scrollbars=yes,toolbar=no,\
		menubar=no,location=no,directories=no,status=yes');
        }
    </script>
</head>
<body>
<h1 style="text-align: center">Pathway Visualization Task</h1>
<br/>

<div class="centerBox">
    <br/>
    <p class="superText2"> Welcome and thank you for agreeing to participate in this study.
        Your effort will help us improve visualization used in biological pathway analyses.
    </p>

    <hr/>
    <form id="mturk_form" method="POST" action="https://workersandbox.mturk.com/mturk/externalSubmit">
        <input type="hidden" id="assignmentId" name="assignmentId" value="">
        <p id="id"></p>
        <p> This task is to rearrange the nodes of a network in a way that follows rules in the training document.<br/>
            Please note that there is no time limit and you can take as long as you want to generate a better result.<br/>
            You can open this page
            <button id="trial"
                    onclick="basicPopup('http://www.csee.umbc.edu/~yongnan/mturk/index.html');return false">
                             Introduction
            </button>
            for your references.
        </p>
        <div id="content">
        <h3>Step 1:</h3><p>Please click the link below for opening a task.<br/></p>

        <h3><a id="href" href=http://www.csee.umbc.edu/~yongnan/PathwayPilot/pilotTask3.html target="_bank"><font
                color=blue>Pathway visualization Task</font></a></h3>
        <h3>Step 2:</h3><p>If you have completed the experiment and successfully submitted your result, please click the button below to submit your hit.</p>
        </div>
        <input id="submitButton" type="submit" name="Submit" value="Submit">
    </form>
    <hr/>
    <br/>
</div>
</body>
</html>
